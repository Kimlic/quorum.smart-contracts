{"author":"Bohdan Grytsenko\r","title":"Migrations deployment tracking\r","fileName":"\\contracts\\Migrations.sol","name":"Migrations","abi":[{"constant":false,"inputs":[{"name":"new_address","type":"address"}],"name":"upgrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"last_completed_migration","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"completed","type":"uint256"}],"name":"setCompleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}],"source":"pragma solidity ^0.4.23;\r\n\r\n/// @title Migrations deployment tracking\r\n/// @author Bohdan Grytsenko\r\n/// @notice Used during deployment track history of applied migrations\r\ncontract Migrations {\r\n    address public owner;\r\n    uint public last_completed_migration;\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier restricted() {\r\n        if (msg.sender == owner) _;\r\n    }\r\n\r\n    /// @notice sets number of last completed migration\r\n    /// @param completed last completed migration number\r\n    function setCompleted(uint completed) public restricted {\r\n        last_completed_migration = completed;\r\n    }\r\n\r\n    /// @notice upgrades contract at specific address and tracks migration number applied\r\n    /// @param new_address upgraded contract new address\r\n    function upgrade(address new_address) public restricted {\r\n        Migrations upgraded = Migrations(new_address);\r\n        upgraded.setCompleted(last_completed_migration);\r\n    }\r\n}\r\n","abiDocs":[{"constant":false,"inputs":[{"name":"new_address","type":"address","description":"upgraded contract new address\r"}],"name":"upgrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function","notice":"upgrades contract at specific address and tracks migration number applied\r","signature":"upgrade(address)","signatureHash":"0900f010"},{"constant":true,"inputs":[],"name":"last_completed_migration","payable":false,"stateMutability":"view","type":"function","signature":"last_completed_migration()","signatureHash":"445df0ac"},{"constant":true,"inputs":[],"name":"owner","payable":false,"stateMutability":"view","type":"function","signature":"owner()","signatureHash":"8da5cb5b"},{"constant":false,"inputs":[{"name":"completed","type":"uint256","description":"last completed migration number\r"}],"name":"setCompleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function","notice":"sets number of last completed migration\r","signature":"setCompleted(uint256)","signatureHash":"fdacd576"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]}
